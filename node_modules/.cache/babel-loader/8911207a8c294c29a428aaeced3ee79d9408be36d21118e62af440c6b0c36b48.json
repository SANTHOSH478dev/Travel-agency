{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\santh\\\\Downloads\\\\pro-travel-agency-fullsite\\\\src\\\\pages\\\\Bookings.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst destinations = [\"Jaipur\", \"Goa\", \"Custom Destination\", \"\", \"Ooty\", \"Kolkata\", \"Ladakh\", \"Munnar\"];\nfunction Bookings() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n\n  // Booking form state\n  const [form, setForm] = useState({\n    id: null,\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    destination: destinations[0],\n    startDate: \"\",\n    endDate: \"\",\n    travelers: 1\n  });\n\n  // Validation errors\n  const [errors, setErrors] = useState({});\n\n  // All bookings for logged-in user\n  const [bookings, setBookings] = useState([]);\n\n  // Filter criteria for bookings history\n  const [filter, setFilter] = useState({\n    destination: \"\",\n    date: \"\"\n  });\n\n  // Success or info notification\n  const [notification, setNotification] = useState(\"\");\n\n  // Toggle to show/hide booking form\n  const [showForm, setShowForm] = useState(false);\n\n  // Flag to avoid saving to localStorage immediately after loading bookings\n  const [isInitialLoad, setIsInitialLoad] = useState(true);\n\n  // Load bookings from localStorage when user changes or logs in\n  useEffect(() => {\n    if (user && user.username) {\n      const savedBookings = JSON.parse(localStorage.getItem(`bookings_${user.username}`)) || [];\n      setBookings(savedBookings);\n    } else {\n      setBookings([]);\n    }\n    setIsInitialLoad(true);\n  }, [user]);\n\n  // Save bookings to localStorage on change, skip initial load\n  useEffect(() => {\n    if (user && user.username) {\n      if (isInitialLoad) {\n        setIsInitialLoad(false);\n        return;\n      }\n      localStorage.setItem(`bookings_${user.username}`, JSON.stringify(bookings));\n    }\n  }, [bookings, user, isInitialLoad]);\n\n  // Validate form inputs\n  const validate = () => {\n    const tempErrors = {};\n    if (!form.name.trim()) tempErrors.name = \"Name is required\";\n    if (!form.email.trim()) tempErrors.email = \"Email is required\";else if (!/\\S+@\\S+\\.\\S+/.test(form.email)) tempErrors.email = \"Email is invalid\";\n    if (!form.phone.trim()) tempErrors.phone = \"Phone is required\";\n    if (!form.startDate) tempErrors.startDate = \"Start date is required\";\n    if (!form.endDate) tempErrors.endDate = \"End date is required\";\n    if (form.travelers < 1) tempErrors.travelers = \"Number of travelers must be at least 1\";\n    return tempErrors;\n  };\n\n  // Reset form to initial state\n  const resetForm = () => {\n    setForm({\n      id: null,\n      name: \"\",\n      email: \"\",\n      phone: \"\",\n      destination: destinations[0],\n      startDate: \"\",\n      endDate: \"\",\n      travelers: 1\n    });\n    setErrors({});\n  };\n\n  // Handle form input changes\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Handle booking form submission\n  const handleSubmit = e => {\n    e.preventDefault();\n    const validationErrors = validate();\n    setErrors(validationErrors);\n    if (Object.keys(validationErrors).length === 0) {\n      if (form.id) {\n        // Update existing booking\n        setBookings(prev => prev.map(b => b.id === form.id ? {\n          ...form\n        } : b));\n        setNotification(\"Booking updated successfully!\");\n      } else {\n        // Create new booking\n        const newBooking = {\n          ...form,\n          id: Date.now()\n        };\n        setBookings(prev => [...prev, newBooking]);\n        setNotification(\"Booking confirmed successfully!\");\n        setTimeout(() => {\n          navigate(\"/confirmation\");\n        }, 1500);\n      }\n      resetForm();\n      setShowForm(false);\n\n      // Clear notification after 3 seconds\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  // Load booking data into form for editing\n  const handleEdit = booking => {\n    setForm(booking);\n    setShowForm(true);\n  };\n\n  // Cancel a booking after confirmation\n  const handleCancel = id => {\n    if (window.confirm(\"Are you sure you want to cancel this booking?\")) {\n      setBookings(prev => prev.filter(b => b.id !== id));\n      setNotification(\"Booking cancelled.\");\n      if (form.id === id) {\n        resetForm();\n        setShowForm(false);\n      }\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  // Filter bookings based on destination and date\n  const filteredBookings = bookings.filter(b => {\n    const matchesDestination = filter.destination ? b.destination.toLowerCase().includes(filter.destination.toLowerCase()) : true;\n    const matchesDate = filter.date ? b.startDate === filter.date : true;\n    return matchesDestination && matchesDate;\n  });\n\n  // Render login prompt if no user is logged in\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-10 text-center text-red-600 font-semibold\",\n      children: \"Please login to book and view your bookings.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-lg mt-12\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-4xl font-extrabold mb-8 text-indigo-700 text-center\",\n      children: \"Book Your Trip\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), notification && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed top-5 right-5 bg-green-600 text-white px-5 py-3 rounded-lg shadow-lg z-50 font-medium\",\n      children: notification\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }, this), !showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowForm(true),\n        className: \"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-8 rounded-lg shadow-md transition duration-300\",\n        children: \"New Booking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      noValidate: true,\n      className: \"space-y-6 bg-indigo-50 p-6 rounded-lg shadow-inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          className: \"block font-semibold mb-1\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          name: \"name\",\n          value: form.name,\n          onChange: handleChange,\n          className: `w-full p-3 rounded border ${errors.name ? \"border-red-500\" : \"border-gray-300\"} focus:outline-none focus:ring-2 focus:ring-indigo-400`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this), errors.name && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600 text-sm mt-1\",\n          children: errors.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          className: \"block font-semibold mb-1\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          name: \"email\",\n          value: form.email,\n          onChange: handleChange,\n          className: `w-full p-3 rounded border ${errors.email ? \"border-red-500\" : \"border-gray-300\"} focus:outline-none focus:ring-2 focus:ring-indigo-400`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this), errors.email && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600 text-sm mt-1\",\n          children: errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"phone\",\n          className: \"block font-semibold mb-1\",\n          children: \"Phone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"tel\",\n          id: \"phone\",\n          name: \"phone\",\n          value: form.phone,\n          onChange: handleChange,\n          className: `w-full p-3 rounded border ${errors.phone ? \"border-red-500\" : \"border-gray-300\"} focus:outline-none focus:ring-2 focus:ring-indigo-400`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this), errors.phone && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600 text-sm mt-1\",\n          children: errors.phone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"destination\",\n          className: \"block font-semibold mb-1\",\n          children: \"Destination\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"destination\",\n          name: \"destination\",\n          value: form.destination,\n          onChange: handleChange,\n          className: \"w-full p-3 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400\",\n          children: destinations.map(dest => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: dest,\n            children: dest\n          }, dest, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"startDate\",\n          className: \"block font-semibold mb-1\",\n          children: \"Start Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          id: \"startDate\",\n          name: \"startDate\",\n          value: form.startDate,\n          onChange: handleChange,\n          className: `w-full p-3 rounded border ${errors.startDate ? \"border-red-500\" : \"border-gray-300\"} focus:outline-none focus:ring-2 focus:ring-indigo-400`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }, this), errors.startDate && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600 text-sm mt-1\",\n          children: errors.startDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"endDate\",\n          className: \"block font-semibold mb-1\",\n          children: \"End Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          id: \"endDate\",\n          name: \"endDate\",\n          value: form.endDate,\n          onChange: handleChange,\n          className: `w-full p-3 rounded border ${errors.endDate ? \"border-red-500\" : \"border-gray-300\"} focus:outline-none focus:ring-2 focus:ring-indigo-400`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this), errors.endDate && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600 text-sm mt-1\",\n          children: errors.endDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"travelers\",\n          className: \"block font-semibold mb-1\",\n          children: \"Number of Travelers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"travelers\",\n          name: \"travelers\",\n          min: \"1\",\n          value: form.travelers,\n          onChange: handleChange,\n          className: `w-full p-3 rounded border ${errors.travelers ? \"border-red-500\" : \"border-gray-300\"} focus:outline-none focus:ring-2 focus:ring-indigo-400`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }, this), errors.travelers && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600 text-sm mt-1\",\n          children: errors.travelers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-4 mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded shadow-md transition duration-300\",\n          children: form.id ? \"Update Booking\" : \"Confirm Booking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => {\n            resetForm();\n            setShowForm(false);\n          },\n          className: \"flex-1 bg-gray-400 hover:bg-gray-500 text-white font-semibold py-3 rounded shadow-md transition duration-300\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"mt-14\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-3xl font-semibold mb-6 text-indigo-700 text-center\",\n        children: \"Booking History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row gap-4 justify-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Filter by destination\",\n          value: filter.destination,\n          onChange: e => setFilter(prev => ({\n            ...prev,\n            destination: e.target.value\n          })),\n          className: \"p-3 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 flex-1 max-w-md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: filter.date,\n          onChange: e => setFilter(prev => ({\n            ...prev,\n            date: e.target.value\n          })),\n          className: \"p-3 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 max-w-xs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setFilter({\n            destination: \"\",\n            date: \"\"\n          }),\n          className: \"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 rounded shadow-md transition duration-300\",\n          children: \"Clear Filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), filteredBookings.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-gray-500 italic\",\n        children: \"No bookings found matching your criteria.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 11\n      }, this) : filteredBookings.map(booking => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border border-gray-300 rounded-lg p-6 mb-6 bg-white shadow-sm\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/booking/${booking.id}`,\n          className: \"text-indigo-700 font-bold text-xl hover:underline\",\n          children: [booking.destination, \" \\xA0|\\xA0 \", booking.startDate, \" to\", \" \", booking.endDate]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 space-y-1 text-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 19\n            }, this), \" \", booking.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 19\n            }, this), \" \", booking.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Phone:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 19\n            }, this), \" \", booking.phone]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Travelers:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 19\n            }, this), \" \", booking.travelers]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEdit(booking),\n            className: \"bg-yellow-400 hover:bg-yellow-500 text-white font-semibold px-4 py-2 rounded shadow-md transition duration-300\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleCancel(booking.id),\n            className: \"bg-red-600 hover:bg-red-700 text-white font-semibold px-4 py-2 rounded shadow-md transition duration-300\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 15\n        }, this)]\n      }, booking.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this);\n}\n_s(Bookings, \"JerYTGnFNGAZ1yANLhzmfFUIAlQ=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = Bookings;\nexport default Bookings;\nvar _c;\n$RefreshReg$(_c, \"Bookings\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Link","useAuth","jsxDEV","_jsxDEV","destinations","Bookings","_s","navigate","user","form","setForm","id","name","email","phone","destination","startDate","endDate","travelers","errors","setErrors","bookings","setBookings","filter","setFilter","date","notification","setNotification","showForm","setShowForm","isInitialLoad","setIsInitialLoad","username","savedBookings","JSON","parse","localStorage","getItem","setItem","stringify","validate","tempErrors","trim","test","resetForm","handleChange","e","target","value","handleSubmit","preventDefault","validationErrors","Object","keys","length","prev","map","b","newBooking","Date","now","setTimeout","handleEdit","booking","handleCancel","window","confirm","filteredBookings","matchesDestination","toLowerCase","includes","matchesDate","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","noValidate","htmlFor","type","onChange","dest","min","placeholder","to","_c","$RefreshReg$"],"sources":["C:/Users/santh/Downloads/pro-travel-agency-fullsite/src/pages/Bookings.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\n\nconst destinations = [\n  \"Jaipur\",\n  \"Goa\",\n  \"Custom Destination\",\n  \"\",\n  \"Ooty\",\n  \"Kolkata\",\n  \"Ladakh\",\n  \"Munnar\",\n];\n\nfunction Bookings() {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n\n  // Booking form state\n  const [form, setForm] = useState({\n    id: null,\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    destination: destinations[0],\n    startDate: \"\",\n    endDate: \"\",\n    travelers: 1,\n  });\n\n  // Validation errors\n  const [errors, setErrors] = useState({});\n\n  // All bookings for logged-in user\n  const [bookings, setBookings] = useState([]);\n\n  // Filter criteria for bookings history\n  const [filter, setFilter] = useState({ destination: \"\", date: \"\" });\n\n  // Success or info notification\n  const [notification, setNotification] = useState(\"\");\n\n  // Toggle to show/hide booking form\n  const [showForm, setShowForm] = useState(false);\n\n  // Flag to avoid saving to localStorage immediately after loading bookings\n  const [isInitialLoad, setIsInitialLoad] = useState(true);\n\n  // Load bookings from localStorage when user changes or logs in\n  useEffect(() => {\n    if (user && user.username) {\n      const savedBookings =\n        JSON.parse(localStorage.getItem(`bookings_${user.username}`)) || [];\n      setBookings(savedBookings);\n    } else {\n      setBookings([]);\n    }\n    setIsInitialLoad(true);\n  }, [user]);\n\n  // Save bookings to localStorage on change, skip initial load\n  useEffect(() => {\n    if (user && user.username) {\n      if (isInitialLoad) {\n        setIsInitialLoad(false);\n        return;\n      }\n      localStorage.setItem(\n        `bookings_${user.username}`,\n        JSON.stringify(bookings)\n      );\n    }\n  }, [bookings, user, isInitialLoad]);\n\n  // Validate form inputs\n  const validate = () => {\n    const tempErrors = {};\n\n    if (!form.name.trim()) tempErrors.name = \"Name is required\";\n    if (!form.email.trim()) tempErrors.email = \"Email is required\";\n    else if (!/\\S+@\\S+\\.\\S+/.test(form.email))\n      tempErrors.email = \"Email is invalid\";\n\n    if (!form.phone.trim()) tempErrors.phone = \"Phone is required\";\n\n    if (!form.startDate) tempErrors.startDate = \"Start date is required\";\n    if (!form.endDate) tempErrors.endDate = \"End date is required\";\n\n    if (form.travelers < 1)\n      tempErrors.travelers = \"Number of travelers must be at least 1\";\n\n    return tempErrors;\n  };\n\n  // Reset form to initial state\n  const resetForm = () => {\n    setForm({\n      id: null,\n      name: \"\",\n      email: \"\",\n      phone: \"\",\n      destination: destinations[0],\n      startDate: \"\",\n      endDate: \"\",\n      travelers: 1,\n    });\n    setErrors({});\n  };\n\n  // Handle form input changes\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  // Handle booking form submission\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const validationErrors = validate();\n    setErrors(validationErrors);\n\n    if (Object.keys(validationErrors).length === 0) {\n      if (form.id) {\n        // Update existing booking\n        setBookings((prev) =>\n          prev.map((b) => (b.id === form.id ? { ...form } : b))\n        );\n        setNotification(\"Booking updated successfully!\");\n      } else {\n        // Create new booking\n        const newBooking = { ...form, id: Date.now() };\n        setBookings((prev) => [...prev, newBooking]);\n        setNotification(\"Booking confirmed successfully!\");\n\n        setTimeout(() => {\n          navigate(\"/confirmation\");\n        }, 1500);\n      }\n\n      resetForm();\n      setShowForm(false);\n\n      // Clear notification after 3 seconds\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  // Load booking data into form for editing\n  const handleEdit = (booking) => {\n    setForm(booking);\n    setShowForm(true);\n  };\n\n  // Cancel a booking after confirmation\n  const handleCancel = (id) => {\n    if (window.confirm(\"Are you sure you want to cancel this booking?\")) {\n      setBookings((prev) => prev.filter((b) => b.id !== id));\n      setNotification(\"Booking cancelled.\");\n\n      if (form.id === id) {\n        resetForm();\n        setShowForm(false);\n      }\n\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  // Filter bookings based on destination and date\n  const filteredBookings = bookings.filter((b) => {\n    const matchesDestination = filter.destination\n      ? b.destination.toLowerCase().includes(filter.destination.toLowerCase())\n      : true;\n\n    const matchesDate = filter.date ? b.startDate === filter.date : true;\n\n    return matchesDestination && matchesDate;\n  });\n\n  // Render login prompt if no user is logged in\n  if (!user) {\n    return (\n      <div className=\"p-10 text-center text-red-600 font-semibold\">\n        Please login to book and view your bookings.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-lg mt-12\">\n      <h2 className=\"text-4xl font-extrabold mb-8 text-indigo-700 text-center\">\n        Book Your Trip\n      </h2>\n\n      {notification && (\n        <div className=\"fixed top-5 right-5 bg-green-600 text-white px-5 py-3 rounded-lg shadow-lg z-50 font-medium\">\n          {notification}\n        </div>\n      )}\n\n      {!showForm && (\n        <div className=\"mb-8 text-center\">\n          <button\n            onClick={() => setShowForm(true)}\n            className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-8 rounded-lg shadow-md transition duration-300\"\n          >\n            New Booking\n          </button>\n        </div>\n      )}\n\n      {showForm && (\n        <form\n          onSubmit={handleSubmit}\n          noValidate\n          className=\"space-y-6 bg-indigo-50 p-6 rounded-lg shadow-inner\"\n        >\n          {/* Name */}\n          <div>\n            <label htmlFor=\"name\" className=\"block font-semibold mb-1\">\n              Name\n            </label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              name=\"name\"\n              value={form.name}\n              onChange={handleChange}\n              className={`w-full p-3 rounded border ${\n                errors.name ? \"border-red-500\" : \"border-gray-300\"\n              } focus:outline-none focus:ring-2 focus:ring-indigo-400`}\n            />\n            {errors.name && (\n              <p className=\"text-red-600 text-sm mt-1\">{errors.name}</p>\n            )}\n          </div>\n\n          {/* Email */}\n          <div>\n            <label htmlFor=\"email\" className=\"block font-semibold mb-1\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={form.email}\n              onChange={handleChange}\n              className={`w-full p-3 rounded border ${\n                errors.email ? \"border-red-500\" : \"border-gray-300\"\n              } focus:outline-none focus:ring-2 focus:ring-indigo-400`}\n            />\n            {errors.email && (\n              <p className=\"text-red-600 text-sm mt-1\">{errors.email}</p>\n            )}\n          </div>\n\n          {/* Phone */}\n          <div>\n            <label htmlFor=\"phone\" className=\"block font-semibold mb-1\">\n              Phone\n            </label>\n            <input\n              type=\"tel\"\n              id=\"phone\"\n              name=\"phone\"\n              value={form.phone}\n              onChange={handleChange}\n              className={`w-full p-3 rounded border ${\n                errors.phone ? \"border-red-500\" : \"border-gray-300\"\n              } focus:outline-none focus:ring-2 focus:ring-indigo-400`}\n            />\n            {errors.phone && (\n              <p className=\"text-red-600 text-sm mt-1\">{errors.phone}</p>\n            )}\n          </div>\n\n          {/* Destination */}\n          <div>\n            <label htmlFor=\"destination\" className=\"block font-semibold mb-1\">\n              Destination\n            </label>\n            <select\n              id=\"destination\"\n              name=\"destination\"\n              value={form.destination}\n              onChange={handleChange}\n              className=\"w-full p-3 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400\"\n            >\n              {destinations.map((dest) => (\n                <option key={dest} value={dest}>\n                  {dest}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Start Date */}\n          <div>\n            <label htmlFor=\"startDate\" className=\"block font-semibold mb-1\">\n              Start Date\n            </label>\n            <input\n              type=\"date\"\n              id=\"startDate\"\n              name=\"startDate\"\n              value={form.startDate}\n              onChange={handleChange}\n              className={`w-full p-3 rounded border ${\n                errors.startDate ? \"border-red-500\" : \"border-gray-300\"\n              } focus:outline-none focus:ring-2 focus:ring-indigo-400`}\n            />\n            {errors.startDate && (\n              <p className=\"text-red-600 text-sm mt-1\">{errors.startDate}</p>\n            )}\n          </div>\n\n          {/* End Date */}\n          <div>\n            <label htmlFor=\"endDate\" className=\"block font-semibold mb-1\">\n              End Date\n            </label>\n            <input\n              type=\"date\"\n              id=\"endDate\"\n              name=\"endDate\"\n              value={form.endDate}\n              onChange={handleChange}\n              className={`w-full p-3 rounded border ${\n                errors.endDate ? \"border-red-500\" : \"border-gray-300\"\n              } focus:outline-none focus:ring-2 focus:ring-indigo-400`}\n            />\n            {errors.endDate && (\n              <p className=\"text-red-600 text-sm mt-1\">{errors.endDate}</p>\n            )}\n          </div>\n\n          {/* Travelers */}\n          <div>\n            <label htmlFor=\"travelers\" className=\"block font-semibold mb-1\">\n              Number of Travelers\n            </label>\n            <input\n              type=\"number\"\n              id=\"travelers\"\n              name=\"travelers\"\n              min=\"1\"\n              value={form.travelers}\n              onChange={handleChange}\n              className={`w-full p-3 rounded border ${\n                errors.travelers ? \"border-red-500\" : \"border-gray-300\"\n              } focus:outline-none focus:ring-2 focus:ring-indigo-400`}\n            />\n            {errors.travelers && (\n              <p className=\"text-red-600 text-sm mt-1\">{errors.travelers}</p>\n            )}\n          </div>\n\n          {/* Buttons */}\n          <div className=\"flex gap-4 mt-6\">\n            <button\n              type=\"submit\"\n              className=\"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded shadow-md transition duration-300\"\n            >\n              {form.id ? \"Update Booking\" : \"Confirm Booking\"}\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => {\n                resetForm();\n                setShowForm(false);\n              }}\n              className=\"flex-1 bg-gray-400 hover:bg-gray-500 text-white font-semibold py-3 rounded shadow-md transition duration-300\"\n            >\n              Cancel\n            </button>\n          </div>\n        </form>\n      )}\n\n      {/* Booking History Section */}\n      <section className=\"mt-14\">\n        <h3 className=\"text-3xl font-semibold mb-6 text-indigo-700 text-center\">\n          Booking History\n        </h3>\n\n        {/* Filters */}\n        <div className=\"flex flex-col md:flex-row gap-4 justify-center mb-6\">\n          <input\n            type=\"text\"\n            placeholder=\"Filter by destination\"\n            value={filter.destination}\n            onChange={(e) =>\n              setFilter((prev) => ({ ...prev, destination: e.target.value }))\n            }\n            className=\"p-3 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 flex-1 max-w-md\"\n          />\n\n          <input\n            type=\"date\"\n            value={filter.date}\n            onChange={(e) =>\n              setFilter((prev) => ({ ...prev, date: e.target.value }))\n            }\n            className=\"p-3 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 max-w-xs\"\n          />\n\n          <button\n            onClick={() => setFilter({ destination: \"\", date: \"\" })}\n            className=\"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 rounded shadow-md transition duration-300\"\n          >\n            Clear Filters\n          </button>\n        </div>\n\n        {/* Bookings List */}\n        {filteredBookings.length === 0 ? (\n          <p className=\"text-center text-gray-500 italic\">\n            No bookings found matching your criteria.\n          </p>\n        ) : (\n          filteredBookings.map((booking) => (\n            <div\n              key={booking.id}\n              className=\"border border-gray-300 rounded-lg p-6 mb-6 bg-white shadow-sm\"\n            >\n              <Link\n                to={`/booking/${booking.id}`}\n                className=\"text-indigo-700 font-bold text-xl hover:underline\"\n              >\n                {booking.destination} &nbsp;|&nbsp; {booking.startDate} to{\" \"}\n                {booking.endDate}\n              </Link>\n\n              <div className=\"mt-3 space-y-1 text-gray-700\">\n                <p>\n                  <strong>Name:</strong> {booking.name}\n                </p>\n                <p>\n                  <strong>Email:</strong> {booking.email}\n                </p>\n                <p>\n                  <strong>Phone:</strong> {booking.phone}\n                </p>\n                <p>\n                  <strong>Travelers:</strong> {booking.travelers}\n                </p>\n              </div>\n\n              <div className=\"mt-4 flex gap-4\">\n                <button\n                  onClick={() => handleEdit(booking)}\n                  className=\"bg-yellow-400 hover:bg-yellow-500 text-white font-semibold px-4 py-2 rounded shadow-md transition duration-300\"\n                >\n                  Edit\n                </button>\n\n                <button\n                  onClick={() => handleCancel(booking.id)}\n                  className=\"bg-red-600 hover:bg-red-700 text-white font-semibold px-4 py-2 rounded shadow-md transition duration-300\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          ))\n        )}\n      </section>\n    </div>\n  );\n}\n\nexport default Bookings;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,IAAI,QAAQ,kBAAkB;AACpD,SAASC,OAAO,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,YAAY,GAAG,CACnB,QAAQ,EACR,KAAK,EACL,oBAAoB,EACpB,EAAE,EACF,MAAM,EACN,SAAS,EACT,QAAQ,EACR,QAAQ,CACT;AAED,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAES;EAAK,CAAC,GAAGP,OAAO,CAAC,CAAC;;EAE1B;EACA,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC;IAC/Bc,EAAE,EAAE,IAAI;IACRC,IAAI,EAAE,EAAE;IACRC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,EAAE;IACTC,WAAW,EAAEX,YAAY,CAAC,CAAC,CAAC;IAC5BY,SAAS,EAAE,EAAE;IACbC,OAAO,EAAE,EAAE;IACXC,SAAS,EAAE;EACb,CAAC,CAAC;;EAEF;EACA,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAExC;EACA,MAAM,CAACwB,QAAQ,EAAEC,WAAW,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;;EAE5C;EACA,MAAM,CAAC0B,MAAM,EAAEC,SAAS,CAAC,GAAG3B,QAAQ,CAAC;IAAEkB,WAAW,EAAE,EAAE;IAAEU,IAAI,EAAE;EAAG,CAAC,CAAC;;EAEnE;EACA,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;;EAEpD;EACA,MAAM,CAAC+B,QAAQ,EAAEC,WAAW,CAAC,GAAGhC,QAAQ,CAAC,KAAK,CAAC;;EAE/C;EACA,MAAM,CAACiC,aAAa,EAAEC,gBAAgB,CAAC,GAAGlC,QAAQ,CAAC,IAAI,CAAC;;EAExD;EACAC,SAAS,CAAC,MAAM;IACd,IAAIU,IAAI,IAAIA,IAAI,CAACwB,QAAQ,EAAE;MACzB,MAAMC,aAAa,GACjBC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,YAAY7B,IAAI,CAACwB,QAAQ,EAAE,CAAC,CAAC,IAAI,EAAE;MACrEV,WAAW,CAACW,aAAa,CAAC;IAC5B,CAAC,MAAM;MACLX,WAAW,CAAC,EAAE,CAAC;IACjB;IACAS,gBAAgB,CAAC,IAAI,CAAC;EACxB,CAAC,EAAE,CAACvB,IAAI,CAAC,CAAC;;EAEV;EACAV,SAAS,CAAC,MAAM;IACd,IAAIU,IAAI,IAAIA,IAAI,CAACwB,QAAQ,EAAE;MACzB,IAAIF,aAAa,EAAE;QACjBC,gBAAgB,CAAC,KAAK,CAAC;QACvB;MACF;MACAK,YAAY,CAACE,OAAO,CAClB,YAAY9B,IAAI,CAACwB,QAAQ,EAAE,EAC3BE,IAAI,CAACK,SAAS,CAAClB,QAAQ,CACzB,CAAC;IACH;EACF,CAAC,EAAE,CAACA,QAAQ,EAAEb,IAAI,EAAEsB,aAAa,CAAC,CAAC;;EAEnC;EACA,MAAMU,QAAQ,GAAGA,CAAA,KAAM;IACrB,MAAMC,UAAU,GAAG,CAAC,CAAC;IAErB,IAAI,CAAChC,IAAI,CAACG,IAAI,CAAC8B,IAAI,CAAC,CAAC,EAAED,UAAU,CAAC7B,IAAI,GAAG,kBAAkB;IAC3D,IAAI,CAACH,IAAI,CAACI,KAAK,CAAC6B,IAAI,CAAC,CAAC,EAAED,UAAU,CAAC5B,KAAK,GAAG,mBAAmB,CAAC,KAC1D,IAAI,CAAC,cAAc,CAAC8B,IAAI,CAAClC,IAAI,CAACI,KAAK,CAAC,EACvC4B,UAAU,CAAC5B,KAAK,GAAG,kBAAkB;IAEvC,IAAI,CAACJ,IAAI,CAACK,KAAK,CAAC4B,IAAI,CAAC,CAAC,EAAED,UAAU,CAAC3B,KAAK,GAAG,mBAAmB;IAE9D,IAAI,CAACL,IAAI,CAACO,SAAS,EAAEyB,UAAU,CAACzB,SAAS,GAAG,wBAAwB;IACpE,IAAI,CAACP,IAAI,CAACQ,OAAO,EAAEwB,UAAU,CAACxB,OAAO,GAAG,sBAAsB;IAE9D,IAAIR,IAAI,CAACS,SAAS,GAAG,CAAC,EACpBuB,UAAU,CAACvB,SAAS,GAAG,wCAAwC;IAEjE,OAAOuB,UAAU;EACnB,CAAC;;EAED;EACA,MAAMG,SAAS,GAAGA,CAAA,KAAM;IACtBlC,OAAO,CAAC;MACNC,EAAE,EAAE,IAAI;MACRC,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAEX,YAAY,CAAC,CAAC,CAAC;MAC5BY,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE,EAAE;MACXC,SAAS,EAAE;IACb,CAAC,CAAC;IACFE,SAAS,CAAC,CAAC,CAAC,CAAC;EACf,CAAC;;EAED;EACA,MAAMyB,YAAY,GAAIC,CAAC,IAAK;IAC1BpC,OAAO,CAAC;MAAE,GAAGD,IAAI;MAAE,CAACqC,CAAC,CAACC,MAAM,CAACnC,IAAI,GAAGkC,CAAC,CAACC,MAAM,CAACC;IAAM,CAAC,CAAC;EACvD,CAAC;;EAED;EACA,MAAMC,YAAY,GAAIH,CAAC,IAAK;IAC1BA,CAAC,CAACI,cAAc,CAAC,CAAC;IAElB,MAAMC,gBAAgB,GAAGX,QAAQ,CAAC,CAAC;IACnCpB,SAAS,CAAC+B,gBAAgB,CAAC;IAE3B,IAAIC,MAAM,CAACC,IAAI,CAACF,gBAAgB,CAAC,CAACG,MAAM,KAAK,CAAC,EAAE;MAC9C,IAAI7C,IAAI,CAACE,EAAE,EAAE;QACX;QACAW,WAAW,CAAEiC,IAAI,IACfA,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAMA,CAAC,CAAC9C,EAAE,KAAKF,IAAI,CAACE,EAAE,GAAG;UAAE,GAAGF;QAAK,CAAC,GAAGgD,CAAE,CACtD,CAAC;QACD9B,eAAe,CAAC,+BAA+B,CAAC;MAClD,CAAC,MAAM;QACL;QACA,MAAM+B,UAAU,GAAG;UAAE,GAAGjD,IAAI;UAAEE,EAAE,EAAEgD,IAAI,CAACC,GAAG,CAAC;QAAE,CAAC;QAC9CtC,WAAW,CAAEiC,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEG,UAAU,CAAC,CAAC;QAC5C/B,eAAe,CAAC,iCAAiC,CAAC;QAElDkC,UAAU,CAAC,MAAM;UACftD,QAAQ,CAAC,eAAe,CAAC;QAC3B,CAAC,EAAE,IAAI,CAAC;MACV;MAEAqC,SAAS,CAAC,CAAC;MACXf,WAAW,CAAC,KAAK,CAAC;;MAElB;MACAgC,UAAU,CAAC,MAAMlC,eAAe,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;IAC7C;EACF,CAAC;;EAED;EACA,MAAMmC,UAAU,GAAIC,OAAO,IAAK;IAC9BrD,OAAO,CAACqD,OAAO,CAAC;IAChBlC,WAAW,CAAC,IAAI,CAAC;EACnB,CAAC;;EAED;EACA,MAAMmC,YAAY,GAAIrD,EAAE,IAAK;IAC3B,IAAIsD,MAAM,CAACC,OAAO,CAAC,+CAA+C,CAAC,EAAE;MACnE5C,WAAW,CAAEiC,IAAI,IAAKA,IAAI,CAAChC,MAAM,CAAEkC,CAAC,IAAKA,CAAC,CAAC9C,EAAE,KAAKA,EAAE,CAAC,CAAC;MACtDgB,eAAe,CAAC,oBAAoB,CAAC;MAErC,IAAIlB,IAAI,CAACE,EAAE,KAAKA,EAAE,EAAE;QAClBiC,SAAS,CAAC,CAAC;QACXf,WAAW,CAAC,KAAK,CAAC;MACpB;MAEAgC,UAAU,CAAC,MAAMlC,eAAe,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;IAC7C;EACF,CAAC;;EAED;EACA,MAAMwC,gBAAgB,GAAG9C,QAAQ,CAACE,MAAM,CAAEkC,CAAC,IAAK;IAC9C,MAAMW,kBAAkB,GAAG7C,MAAM,CAACR,WAAW,GACzC0C,CAAC,CAAC1C,WAAW,CAACsD,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC/C,MAAM,CAACR,WAAW,CAACsD,WAAW,CAAC,CAAC,CAAC,GACtE,IAAI;IAER,MAAME,WAAW,GAAGhD,MAAM,CAACE,IAAI,GAAGgC,CAAC,CAACzC,SAAS,KAAKO,MAAM,CAACE,IAAI,GAAG,IAAI;IAEpE,OAAO2C,kBAAkB,IAAIG,WAAW;EAC1C,CAAC,CAAC;;EAEF;EACA,IAAI,CAAC/D,IAAI,EAAE;IACT,oBACEL,OAAA;MAAKqE,SAAS,EAAC,6CAA6C;MAAAC,QAAA,EAAC;IAE7D;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAEV;EAEA,oBACE1E,OAAA;IAAKqE,SAAS,EAAC,2DAA2D;IAAAC,QAAA,gBACxEtE,OAAA;MAAIqE,SAAS,EAAC,0DAA0D;MAAAC,QAAA,EAAC;IAEzE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAEJnD,YAAY,iBACXvB,OAAA;MAAKqE,SAAS,EAAC,6FAA6F;MAAAC,QAAA,EACzG/C;IAAY;MAAAgD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACN,EAEA,CAACjD,QAAQ,iBACRzB,OAAA;MAAKqE,SAAS,EAAC,kBAAkB;MAAAC,QAAA,eAC/BtE,OAAA;QACE2E,OAAO,EAAEA,CAAA,KAAMjD,WAAW,CAAC,IAAI,CAAE;QACjC2C,SAAS,EAAC,mHAAmH;QAAAC,QAAA,EAC9H;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN,EAEAjD,QAAQ,iBACPzB,OAAA;MACE4E,QAAQ,EAAE9B,YAAa;MACvB+B,UAAU;MACVR,SAAS,EAAC,oDAAoD;MAAAC,QAAA,gBAG9DtE,OAAA;QAAAsE,QAAA,gBACEtE,OAAA;UAAO8E,OAAO,EAAC,MAAM;UAACT,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EAAC;QAE3D;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACR1E,OAAA;UACE+E,IAAI,EAAC,MAAM;UACXvE,EAAE,EAAC,MAAM;UACTC,IAAI,EAAC,MAAM;UACXoC,KAAK,EAAEvC,IAAI,CAACG,IAAK;UACjBuE,QAAQ,EAAEtC,YAAa;UACvB2B,SAAS,EAAE,6BACTrD,MAAM,CAACP,IAAI,GAAG,gBAAgB,GAAG,iBAAiB;QACK;UAAA8D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,EACD1D,MAAM,CAACP,IAAI,iBACVT,OAAA;UAAGqE,SAAS,EAAC,2BAA2B;UAAAC,QAAA,EAAEtD,MAAM,CAACP;QAAI;UAAA8D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAC1D;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAGN1E,OAAA;QAAAsE,QAAA,gBACEtE,OAAA;UAAO8E,OAAO,EAAC,OAAO;UAACT,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EAAC;QAE5D;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACR1E,OAAA;UACE+E,IAAI,EAAC,OAAO;UACZvE,EAAE,EAAC,OAAO;UACVC,IAAI,EAAC,OAAO;UACZoC,KAAK,EAAEvC,IAAI,CAACI,KAAM;UAClBsE,QAAQ,EAAEtC,YAAa;UACvB2B,SAAS,EAAE,6BACTrD,MAAM,CAACN,KAAK,GAAG,gBAAgB,GAAG,iBAAiB;QACI;UAAA6D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,EACD1D,MAAM,CAACN,KAAK,iBACXV,OAAA;UAAGqE,SAAS,EAAC,2BAA2B;UAAAC,QAAA,EAAEtD,MAAM,CAACN;QAAK;UAAA6D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAC3D;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAGN1E,OAAA;QAAAsE,QAAA,gBACEtE,OAAA;UAAO8E,OAAO,EAAC,OAAO;UAACT,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EAAC;QAE5D;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACR1E,OAAA;UACE+E,IAAI,EAAC,KAAK;UACVvE,EAAE,EAAC,OAAO;UACVC,IAAI,EAAC,OAAO;UACZoC,KAAK,EAAEvC,IAAI,CAACK,KAAM;UAClBqE,QAAQ,EAAEtC,YAAa;UACvB2B,SAAS,EAAE,6BACTrD,MAAM,CAACL,KAAK,GAAG,gBAAgB,GAAG,iBAAiB;QACI;UAAA4D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,EACD1D,MAAM,CAACL,KAAK,iBACXX,OAAA;UAAGqE,SAAS,EAAC,2BAA2B;UAAAC,QAAA,EAAEtD,MAAM,CAACL;QAAK;UAAA4D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAC3D;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAGN1E,OAAA;QAAAsE,QAAA,gBACEtE,OAAA;UAAO8E,OAAO,EAAC,aAAa;UAACT,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EAAC;QAElE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACR1E,OAAA;UACEQ,EAAE,EAAC,aAAa;UAChBC,IAAI,EAAC,aAAa;UAClBoC,KAAK,EAAEvC,IAAI,CAACM,WAAY;UACxBoE,QAAQ,EAAEtC,YAAa;UACvB2B,SAAS,EAAC,iGAAiG;UAAAC,QAAA,EAE1GrE,YAAY,CAACoD,GAAG,CAAE4B,IAAI,iBACrBjF,OAAA;YAAmB6C,KAAK,EAAEoC,IAAK;YAAAX,QAAA,EAC5BW;UAAI,GADMA,IAAI;YAAAV,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAET,CACT;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAGN1E,OAAA;QAAAsE,QAAA,gBACEtE,OAAA;UAAO8E,OAAO,EAAC,WAAW;UAACT,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EAAC;QAEhE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACR1E,OAAA;UACE+E,IAAI,EAAC,MAAM;UACXvE,EAAE,EAAC,WAAW;UACdC,IAAI,EAAC,WAAW;UAChBoC,KAAK,EAAEvC,IAAI,CAACO,SAAU;UACtBmE,QAAQ,EAAEtC,YAAa;UACvB2B,SAAS,EAAE,6BACTrD,MAAM,CAACH,SAAS,GAAG,gBAAgB,GAAG,iBAAiB;QACA;UAAA0D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,EACD1D,MAAM,CAACH,SAAS,iBACfb,OAAA;UAAGqE,SAAS,EAAC,2BAA2B;UAAAC,QAAA,EAAEtD,MAAM,CAACH;QAAS;UAAA0D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAC/D;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAGN1E,OAAA;QAAAsE,QAAA,gBACEtE,OAAA;UAAO8E,OAAO,EAAC,SAAS;UAACT,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EAAC;QAE9D;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACR1E,OAAA;UACE+E,IAAI,EAAC,MAAM;UACXvE,EAAE,EAAC,SAAS;UACZC,IAAI,EAAC,SAAS;UACdoC,KAAK,EAAEvC,IAAI,CAACQ,OAAQ;UACpBkE,QAAQ,EAAEtC,YAAa;UACvB2B,SAAS,EAAE,6BACTrD,MAAM,CAACF,OAAO,GAAG,gBAAgB,GAAG,iBAAiB;QACE;UAAAyD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,EACD1D,MAAM,CAACF,OAAO,iBACbd,OAAA;UAAGqE,SAAS,EAAC,2BAA2B;UAAAC,QAAA,EAAEtD,MAAM,CAACF;QAAO;UAAAyD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAC7D;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAGN1E,OAAA;QAAAsE,QAAA,gBACEtE,OAAA;UAAO8E,OAAO,EAAC,WAAW;UAACT,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EAAC;QAEhE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACR1E,OAAA;UACE+E,IAAI,EAAC,QAAQ;UACbvE,EAAE,EAAC,WAAW;UACdC,IAAI,EAAC,WAAW;UAChByE,GAAG,EAAC,GAAG;UACPrC,KAAK,EAAEvC,IAAI,CAACS,SAAU;UACtBiE,QAAQ,EAAEtC,YAAa;UACvB2B,SAAS,EAAE,6BACTrD,MAAM,CAACD,SAAS,GAAG,gBAAgB,GAAG,iBAAiB;QACA;UAAAwD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,EACD1D,MAAM,CAACD,SAAS,iBACff,OAAA;UAAGqE,SAAS,EAAC,2BAA2B;UAAAC,QAAA,EAAEtD,MAAM,CAACD;QAAS;UAAAwD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAC/D;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAGN1E,OAAA;QAAKqE,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC9BtE,OAAA;UACE+E,IAAI,EAAC,QAAQ;UACbV,SAAS,EAAC,kHAAkH;UAAAC,QAAA,EAE3HhE,IAAI,CAACE,EAAE,GAAG,gBAAgB,GAAG;QAAiB;UAAA+D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzC,CAAC,eAET1E,OAAA;UACE+E,IAAI,EAAC,QAAQ;UACbJ,OAAO,EAAEA,CAAA,KAAM;YACblC,SAAS,CAAC,CAAC;YACXf,WAAW,CAAC,KAAK,CAAC;UACpB,CAAE;UACF2C,SAAS,EAAC,8GAA8G;UAAAC,QAAA,EACzH;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CACP,eAGD1E,OAAA;MAASqE,SAAS,EAAC,OAAO;MAAAC,QAAA,gBACxBtE,OAAA;QAAIqE,SAAS,EAAC,yDAAyD;QAAAC,QAAA,EAAC;MAExE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAGL1E,OAAA;QAAKqE,SAAS,EAAC,qDAAqD;QAAAC,QAAA,gBAClEtE,OAAA;UACE+E,IAAI,EAAC,MAAM;UACXI,WAAW,EAAC,uBAAuB;UACnCtC,KAAK,EAAEzB,MAAM,CAACR,WAAY;UAC1BoE,QAAQ,EAAGrC,CAAC,IACVtB,SAAS,CAAE+B,IAAI,KAAM;YAAE,GAAGA,IAAI;YAAExC,WAAW,EAAE+B,CAAC,CAACC,MAAM,CAACC;UAAM,CAAC,CAAC,CAC/D;UACDwB,SAAS,EAAC;QAA0G;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrH,CAAC,eAEF1E,OAAA;UACE+E,IAAI,EAAC,MAAM;UACXlC,KAAK,EAAEzB,MAAM,CAACE,IAAK;UACnB0D,QAAQ,EAAGrC,CAAC,IACVtB,SAAS,CAAE+B,IAAI,KAAM;YAAE,GAAGA,IAAI;YAAE9B,IAAI,EAAEqB,CAAC,CAACC,MAAM,CAACC;UAAM,CAAC,CAAC,CACxD;UACDwB,SAAS,EAAC;QAAmG;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9G,CAAC,eAEF1E,OAAA;UACE2E,OAAO,EAAEA,CAAA,KAAMtD,SAAS,CAAC;YAAET,WAAW,EAAE,EAAE;YAAEU,IAAI,EAAE;UAAG,CAAC,CAAE;UACxD+C,SAAS,EAAC,qGAAqG;UAAAC,QAAA,EAChH;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EAGLV,gBAAgB,CAACb,MAAM,KAAK,CAAC,gBAC5BnD,OAAA;QAAGqE,SAAS,EAAC,kCAAkC;QAAAC,QAAA,EAAC;MAEhD;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,GAEJV,gBAAgB,CAACX,GAAG,CAAEO,OAAO,iBAC3B5D,OAAA;QAEEqE,SAAS,EAAC,+DAA+D;QAAAC,QAAA,gBAEzEtE,OAAA,CAACH,IAAI;UACHuF,EAAE,EAAE,YAAYxB,OAAO,CAACpD,EAAE,EAAG;UAC7B6D,SAAS,EAAC,mDAAmD;UAAAC,QAAA,GAE5DV,OAAO,CAAChD,WAAW,EAAC,aAAe,EAACgD,OAAO,CAAC/C,SAAS,EAAC,KAAG,EAAC,GAAG,EAC7D+C,OAAO,CAAC9C,OAAO;QAAA;UAAAyD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CAAC,eAEP1E,OAAA;UAAKqE,SAAS,EAAC,8BAA8B;UAAAC,QAAA,gBAC3CtE,OAAA;YAAAsE,QAAA,gBACEtE,OAAA;cAAAsE,QAAA,EAAQ;YAAK;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACd,OAAO,CAACnD,IAAI;UAAA;YAAA8D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnC,CAAC,eACJ1E,OAAA;YAAAsE,QAAA,gBACEtE,OAAA;cAAAsE,QAAA,EAAQ;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACd,OAAO,CAAClD,KAAK;UAAA;YAAA6D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrC,CAAC,eACJ1E,OAAA;YAAAsE,QAAA,gBACEtE,OAAA;cAAAsE,QAAA,EAAQ;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACd,OAAO,CAACjD,KAAK;UAAA;YAAA4D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrC,CAAC,eACJ1E,OAAA;YAAAsE,QAAA,gBACEtE,OAAA;cAAAsE,QAAA,EAAQ;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACd,OAAO,CAAC7C,SAAS;UAAA;YAAAwD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eAEN1E,OAAA;UAAKqE,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9BtE,OAAA;YACE2E,OAAO,EAAEA,CAAA,KAAMhB,UAAU,CAACC,OAAO,CAAE;YACnCS,SAAS,EAAC,gHAAgH;YAAAC,QAAA,EAC3H;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAET1E,OAAA;YACE2E,OAAO,EAAEA,CAAA,KAAMd,YAAY,CAACD,OAAO,CAACpD,EAAE,CAAE;YACxC6D,SAAS,EAAC,0GAA0G;YAAAC,QAAA,EACrH;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA,GAxCDd,OAAO,CAACpD,EAAE;QAAA+D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAyCZ,CACN,CACF;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEV;AAACvE,EAAA,CAzcQD,QAAQ;EAAA,QACEN,WAAW,EACXE,OAAO;AAAA;AAAAuF,EAAA,GAFjBnF,QAAQ;AA2cjB,eAAeA,QAAQ;AAAC,IAAAmF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}